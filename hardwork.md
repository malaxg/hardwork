# 一、微服务

#### [*微服务*写的最全的一篇文章 - 简书](http://www.baidu.com/link?url=DNxQCwA0WwDNb_MdhVT7Zx2va9gHM61bpsXBOPNqUO6k-cgXn9udjI55qoIhnqnM)

[阿里架构师：带你快速理解微服务架构，理解微服务架构的核心](https://www.jianshu.com/p/882a87627b36) 

## **[分布式和微服务的区别](https://www.cnblogs.com/zxyj/p/11083925.html)**

# 二、将项目改造成微服务，会引发什么问题？

​	场景：所有的代码之前都在同一个服务器上，现在要进行拆分，通常是按照业务进行拆分，将耦合度较高的程序代码放入一个服务中。



个人疑问(从服务拆分到最终形成一个稳定的分布式架构需要考虑的问题的时间顺序)：

---

**服务按照业务拆分后，部署在不同的服务器上时，服务之间如何通信，通信的方式有哪些**

​        解决思路：提供服务的应用，提供HttpRestful形式的接口，服务消费者通过在程序中请求远程接口以达到通信的目的，但是这样会衍生出很多问题，请接着往后面看。

​	通信的方式或机制：

​		1、基于Http的rest机制 ：

​			优点：简单，常见，经过代理后就像调用本地方法一样；没有中间件代理，系统更加简单
            缺点：只支持请求/响应的模式，不支持通知，请求/异步响应、发布订阅等模式；降低了可用性，在服务期间客户端和服务端必须都是可用的。

​		2、消息总线，消息队列  ：

​			优点：把客户端和服务端解耦，更松耦合；提高可用性，因为消息中间件缓								              		存了消息，直到消费者可以消费；支持很多通信机制比如通知、请求/异步响应、发布/订阅、发布/异步响应。

​			缺点：消息中间件有额外的复杂性

​		3、基于Thrift、Dubbo等协议的RPC机制：底层是二进制，效率稍高，但是会导致微服务之间产生繁琐的通信(比如Dubbo通过@Reference注入远程Service，这样每次请求Service方法都要进行一次远程调用)，使得系统表现得更为糟糕，所以在微服务架构中，通常使用上面两种。参考如图

​	

---

**服务拆分后，应用及数据库的个头虽然变小了，但数量成倍增长，运维维护成本大大提高，此时必须需要构建“持续交付”平台(流水线)来支撑整个实施过程，该平台需要两大内容，缺一不可！**

​        自动化测试：每次部署前的强心剂，尽可能地获得对正在运行的软件的信心

​	自动化部署：解决烦琐枯燥的重复操作以及对多环境的配置管理

​		自动化部署流程：参考某龙软件和Jekins 

​		1：拉取服务所在分支代码

​		2：自动打包、编译、测试、部署docker



​	引发问题：自动化测试和部署开源框架有哪些，如何和系统进行集成



---

**各个服务能够通信之后，发起某个服务请求，发现出现网络延时或者服务挂掉，此时最佳最优雅的处理方式是什么**

​        解决思路：

​	原理思路：



---

**各个服务拥有自己的数据库，在实现跨服务业务逻辑时，如何保证数据的一致性**

​        解决思路：在微服务架构中，我们更强调各个服务之间进行“无事务”的调用，而对于数据一致性，只要求数据在最后的处理状态是一致的即可；若在过程中发生错误，通过补偿机制来处理，使得错误数据能够达到最终的一致性

[^出自翟永超[Spring Cloud微服务架构实战\]]: 

​	引发问题：什么是补偿机制，实现方式又是什么

​	思考：如果有分布式事务框架或解决办法，还需要使用补偿机制么



---

**分布式事务解决方案及优缺点**

​        解决思路：

​	原理思路：



---

**微服务中必然服务众多，分布在不同的服务器上，如何有效及时的管理服务（服务注册、服务发现等）？**

​        解决思路：

​	原理思路：

**服务注册与发现中心有哪些？他们各有什么优势，什么情况下使用哪种注册与发现中心？**

​        解决思路：

​		Netflix Eureka: 

​		Apache Zookeeper:

​		Apache Consul:

​	原理思路：

一个服务可能会存在多个实例，如何实现负载均衡及负载均衡有哪些策略及代码实现方式 ？

​	解决思路：是默认使用了Ribbon中ZoneAvoidanceRule策略进行客户端的负载均衡的

​	原理思路：

如何自定义负载均衡策略 ？

​	解决思路：是默认使用了ribbon进行客户端的负载均衡的，默认的是随机的策略

​	原理思路：

某个服务实例宕机，如何实现剔除服务 ？

​	解决思路：

​	原理思路：

请求某个服务实例时，发现其宕机或者其他原因造成接口无正确的返回数据，如何自动切换请求其他实例 

​	解决思路：

​	原理思路：

分布式session如何处理？

​	解决思路：

​	原理思路：

# 使用SpringCloud搭建微服务

1. 简介

   ​	它基于SpirngBoot，是一套用于开发微服务架构的开发工具，它为开发微服务所设计的问题提供了一种简单开发的方式，那么微服务架构中会存在什么问题？SpringCloud又是如何解决的？

   

   

2. 
